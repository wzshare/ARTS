# Week 44

> October 29 to November 4

## Algorithm：


## Review：
`Auto Layout` 的原理就是对线性方程组或者不等式的求解。

`Auto Layout` 不止在复杂 `UI` 界面布局的表现不佳，它还会强制视图在主线程上布局；所以在 `ASDK` 中提供了另一种可以在后台线程中运行的布局引擎，它的结构大致是这样的：
![](../images/layout-hierarchy.png)
`ASLayoutSpec` 与下面的所有的 `Spec` 类都是继承关系，在视图需要布局时，会调用 `ASLayoutSpec` 或者它的子类的 `- measureWithSizeRange:` 方法返回一个用于布局的对象 `ASLayout`。

使用 `ASDK` 布局时，需要做下面四件事情中的一件：
- 提供 `layoutSpecBlock`
- 覆写 `- layoutSpecThatFits:` 方法，这个方法与 `-[UIView sizeThatFits:]` 相似，区别是计算出的大小会通过缓存来提升性能。文档中推荐在子类中覆写 `- layoutSpecThatFits:` 方法，返回一个用于布局的 `ASLayoutSpec` 对象，然后使用 `ASLayoutSpec` 中的 `- measureWithSizeRange:` 方法对它指定的视图进行布局。
- 覆写 `- calculateSizeThatFits:` 方法，提供了手动布局的方式
- 覆写 `- calculateLayoutThatFits:` 方法，把手动布局和 Spec 布局封装成了一个接口

**总结**
其实 `ASDK` 的布局引擎大部分都是对 `ComponentKit` 的封装，`ASDK` 的布局计算不仅在后台并发线程中进行、而且通过引入 `Flexbox` 提升了布局的性能，但是 `ASDK` 的使用相对比较复杂，如果只想对布局性能进行优化，更推荐单独使用 `ComponentKit` 框架。

## Tip：


## Share：